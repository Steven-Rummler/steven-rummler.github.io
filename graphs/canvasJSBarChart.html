<html>

<head>
  <title>CanvasJS Bar Chart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
  <div id="chartContainer" style="height: 100%; width: 100%;"></div>
  <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
  <script>
    window.onload = function () {
      const defaultData = [
        { y: 53_112, label: "Doctoral degree", indexLabel: '$53,112' },
        { y: 48_468, label: "Master's degree", indexLabel: '$48,468' },
        { y: 32_568, label: "Bachelor's degree", indexLabel: '$32,568' },
        { y: 25_608, label: "Associates degree", indexLabel: '$25,608' },
        { y: 17_976, label: "Undergraduate certificate", indexLabel: '$17,976' },
      ];

      const urlParams = new URLSearchParams(window.location.search);

      const format = urlParams.get('format');
      const formatter = format === 'currency' ? Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format :
        format === 'percent' ? Intl.NumberFormat('en-US', { style: 'percent', maximumFractionDigits: 1, minimumFractionDigits: 0 }).format :
          Intl.NumberFormat('en-US').format;

      const urlData = urlParams.get('data');
      const dataPoints = urlData === null ? defaultData : urlData.split(',').map((dataPoint) => {
        const [label, y] = dataPoint.split(':');
        return { label, y: parseFloat(y), indexLabel: formatter(parseFloat(y)) };
      }).sort((a, b) => b.y - a.y);

      const chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: true,

        data: [{
          type: "bar",
          color: "#5DA6B0",
          dataPoints,
          indexLabelPlacement: 'inside',
          indexLabelTextAlign: 'right'
        }],

        axisX: {
          tickLength: 0,
          labelMaxWidth: 200,
          lineColor: '#ddd',
        },

        axisY: {
          minimum: 0,
          maximum: format === 'percent' ? 1 : dataPoints[0].y * 1.1,
          gridThickness: format === 'percent' ? 1 : 0,
          gridColor: '#ddd',
          labelFormatter: format === 'percent' ? label => formatter(label.value) : () => '',
          lineThickness: 0,
          tickLength: 0
        },

        dataPointWidth: 20,

        toolTip: {
          enabled: false
        }
      });
      chart.render();
    }</script>
</body>

</html>